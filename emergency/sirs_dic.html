<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>SOFA / qSOFA | 医療電算機</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 共通CSS（分割後） -->
  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/layout.css" />
  <link rel="stylesheet" href="../css/components.css" />
  <link rel="stylesheet" href="../css/responsive.css" />

  <!-- 共通ヘッダー/フッター読込 -->
  <script src="../js/include.js" defer></script>
  <!-- 共通スコアユーティリティ -->
  <script src="../js/score-utils.js" defer></script>
  <!-- このスコア専用の計算JSがあればここに -->
  <script src="sirs_dic.js" defer></script>
</head>

<!-- data-subtitle に、このページ固有のサブタイトルを書く -->
<body data-subtitle="SOFA / qSOFA スコア計算">
  <!-- 共通ヘッダー -->
  <div data-include="../partials/header.html"></div>

  <main>
    <div class="wrapper">
      <div class="score-card-container">
        <a href="emergency.index.html" class="back-link">← 救急スコア一覧に戻る</a>

        <div class="score-title">SIRS / 急性期DIC（JAAM, 厚労省ルート）</div>
        <div class="score-subtitle">
          上部で SIRS に関するバイタルと、DIC に必要な検査値を入力すると、SIRS スコアと急性期DICスコアを同時に算出します。
        </div>

        <!-- 入力フォーム -->
        <form id="sirs_dic_form" onsubmit="return false;">

          <div class="section-label">SIRS 判定用バイタル</div>
          <div class="form-grid">
            <div class="form-row">
              <label for="temp">体温 (℃)</label>
              <input id="temp" type="number" step="0.1" />
            </div>
            <div class="form-row">
              <label for="hr">心拍数 (/分)</label>
              <input id="hr" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="rr">呼吸数 (/分)</label>
              <input id="rr" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="paco2">PaCO₂ (mmHg)</label>
              <input id="paco2" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="wbc">白血球数 (/μL)</label>
              <input id="wbc" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="bands">幼若球比 (%)</label>
              <input id="bands" type="number" min="0" max="100" step="0.1" />
            </div>
          </div>

          <div class="small-note">
            SIRS 条件：<br />
            ・体温 &gt; 38℃ または &lt; 36℃<br />
            ・心拍数 &gt; 90 /分<br />
            ・呼吸数 &gt; 20 /分 または PaCO₂ &lt; 32 mmHg<br />
            ・白血球数 &gt; 12,000 /μL または &lt; 4,000 /μL または 幼若球比 &gt; 10%<br />
            ※ 2項目以上で SIRS とされます。
          </div>

          <div class="section-label">DIC 判定用検査値（急性期DIC診断基準）</div>
          <div class="form-grid">
            <div class="form-row">
              <label for="plt">血小板数 (/μL)</label>
              <input id="plt" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="plt_drop">血小板減少率 (24時間, %)</label>
              <input id="plt_drop" type="number" min="0" max="100" step="0.1" />
            </div>
            <div class="form-row">
              <label for="pt_ratio">PT比 (検体PT秒 / 正常対照)</label>
              <input id="pt_ratio" type="number" min="0" step="0.01" />
            </div>
            <div class="form-row">
              <label for="fdp">FDP (μg/mL)</label>
              <input id="fdp" type="number" min="0" step="0.1" />
            </div>
          </div>

          <div class="small-note">
            急性期DIC 診断基準（日本救急医学会）：<br />
            ・項目：SIRS スコア、血小板数/減少率、PT比、FDP<br />
            ・スコア ≥ 4 点で「急性期 DIC」と診断されます。<br />
            ※ Dダイマーしかない場合は各施設の換算表等を用いて FDP 相当値を入力してください。
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-primary" onclick="calculateSIRSandDIC()">
              SIRS / DIC計算
            </button>
            <button type="button" class="btn btn-secondary" onclick="clearAll()">
              クリア
            </button>
          </div>
        </form>

        <!-- 結果表示 -->
        <div class="result-area">
          <div class="result-card" id="card_sirs">
            <div class="result-title">SIRS スコア</div>
            <div class="result-value">--</div>
            <div class="result-category"></div>
            <div class="result-message">
              4項目のうち、条件を満たす項目数を表示します（2項目以上でSIRS）。
            </div>
          </div>

          <div class="result-card" id="card_dic">
            <div class="result-title">急性期DICスコア</div>
            <div class="result-value">--</div>
            <div class="result-category"></div>
            <div class="result-message">
              SIRS、血小板、PT比、FDP から算出される急性期DICスコアです（4点以上でDIC）。
            </div>
          </div>
        </div>

        <div class="result-warning">
          ※ 本ツールは急性期DIC診断基準（JAAM）を参考に作成しています。<br />
          ※ 計算結果は参考値であり、診断・治療方針は必ず臨床医の総合判断で行ってください。
        </div>
      </div>
    </div>
  </main>

  <footer>
    © 医療電算機 v0.1
  </footer>

   <!-- 共通フッター -->
  <div data-include="../partials/footer.html"></div>
</body>
</html>
