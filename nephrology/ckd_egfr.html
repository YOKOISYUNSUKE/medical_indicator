<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>CKD / eGFR スコア</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 共通CSS -->
  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/layout.css" />
  <link rel="stylesheet" href="../css/components.css" />
  <link rel="stylesheet" href="../css/responsive.css" />

  <!-- PWA 関連（透析ページと同様の構成） -->
  <link rel="manifest" href="../manifest.webmanifest" />
  <meta name="theme-color" content="#ffffff" />
  <link rel="apple-touch-icon" href="../icons/icon-192.png" />

  <!-- 共通JS -->
  <script src="../js/include.js" defer></script>
  <script src="../js/score-utils.js" defer></script>

  <!-- CKD 専用 JS（同階層） -->
  <script src="ckd_egfr.js" defer></script>

  <!-- PWA 登録 -->
  <script src="../js/pwa-register.js" defer></script>
</head>
<body data-subtitle="CKD / eGFR 計算・ステージ分類">
  <!-- 共通ヘッダー -->
  <div data-include="../partials/header.html"></div>

  <main class="wrapper">
    <a href="nephrology.index.html" class="back-link">← 腎疾患スコア一覧に戻る</a>

    <div class="section-title" style="margin-top: 12px;">
      CKD-eGFR 計算・G / A ステージ分類
    </div>

    <div class="score-card-container">
      <section class="score-card" aria-labelledby="ckd-section-title">
        <h2 id="ckd-section-title" class="score-name" style="margin-bottom: 8px;">
          eGFR（日本人向け）と CKD ステージ
        </h2>

        <p class="score-desc" style="margin-bottom: 12px;">
          日本人成人向け eGFR 推算式（日本腎臓学会推奨）を用いて eGFR を計算し、
          G ステージおよび尿アルブミン/Cr 比 (UACR) による A ステージを簡易に判定します。
        </p>

        <!-- 年齢 -->
        <div class="field-wrapper">
          <label for="ckd-age">
            年齢<span style="font-size:0.8rem;">（おおむね 20 歳以上を想定）</span>
          </label>
          <input
            id="ckd-age"
            type="number"
            inputmode="decimal"
            step="1"
            placeholder="例: 65"
          />
        </div>

        <!-- 性別 -->
        <div class="field-wrapper">
          <label for="ckd-sex">性別</label>
          <select id="ckd-sex">
            <option value="male">男性</option>
            <option value="female">女性</option>
          </select>
        </div>

        <!-- 血清クレアチニン -->
        <div class="field-wrapper">
          <label for="ckd-cr">
            血清クレアチニン Cr<span style="font-size:0.8rem;"> [mg/dL]</span>
          </label>
          <input
            id="ckd-cr"
            type="number"
            inputmode="decimal"
            step="0.01"
            placeholder="例: 1.2"
          />
        </div>

        <hr style="margin: 8px 0;" />

        <!-- UACR（任意） -->
        <div class="field-wrapper">
          <label for="ckd-uacr">
            尿アルブミン/Cr 比 UACR<span style="font-size:0.8rem;"> [mg/gCr]（任意）</span>
          </label>
          <input
            id="ckd-uacr"
            type="number"
            inputmode="decimal"
            step="1"
            placeholder="例: 150"
          />
        </div>

        <button id="ckd-calc-btn" class="calc-button">
          eGFR と CKD ステージを計算
        </button>

        <!-- 結果表示 -->
        <div id="ckd-egfr-result" class="score-result" aria-live="polite"></div>
        <div id="ckd-gstage" class="score-interpret"></div>
        <div id="ckd-astage" class="score-interpret"></div>
        <div id="ckd-comment" class="score-interpret" style="margin-top: 4px;"></div>

        <p style="margin-top: 12px; font-size: 0.75rem; color: #777; line-height: 1.5;">
          eGFR は日本人成人向け推算式
          <br/>
          eGFR = 194 × Cr<sup>-1.094</sup> × 年齢<sup>-0.287</sup> × (女性なら 0.739)
          に基づき算出しています。
          <br/>
          値は参考情報であり、診断や治療方針の決定は必ず臨床経過や他の検査所見と総合して行ってください。
        </p>
      </section>
    </div>
  </main>

  <!-- 共通フッター -->
  <div data-include="../partials/footer.html"></div>
</body>
</html>
